name: Fetch Manuscript Files

on:
  pull_request:

jobs:
  list-pr-manuscripts:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Fetch only .manuscript files from the PR
        env:
          GH_TOKEN: ${{ github.token }}   # Required for gh CLI
        run: |
          gh api \
            repos/${{ github.repository }}/pulls/${{ github.event.pull_request.number }}/files \
            --jq '.[] 
              | select(.filename | endswith(".manuscript")) 
              | .filename' \
            > manuscript.txt

      - name: Print all .manuscript filenames
        run: |
          echo "Manuscript files in this PR:"
          cat manuscript.txt || echo "No manuscript files found."
